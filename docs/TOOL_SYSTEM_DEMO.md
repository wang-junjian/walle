# 智能体工具系统演示

## 概述

我们已经成功实现并集成了增强版的代码执行工具和网络搜索工具到智能体系统中。以下是详细的功能说明和测试示例。

## 🔧 新增功能

### 1. 增强版网络搜索工具 (web_search)

#### 功能特性
- **智能搜索策略**: 根据内容自动选择搜索类型（通用、技术、新闻、学术）
- **多语言支持**: 支持中文和英文搜索
- **结果分析**: 提供搜索摘要、相关性评分、结果统计
- **类型识别**: 自动识别技术文档、新闻、学术论文等内容类型

#### 支持的搜索类型
- `general`: 通用搜索，适合日常问题
- `technical`: 技术搜索，侧重于技术文档和API参考
- `news`: 新闻搜索，获取最新资讯和动态
- `academic`: 学术搜索，查找论文和研究资料

#### 测试用例
```
1. "搜索Vue.js最新技术文档" → 技术搜索
2. "查找人工智能最新新闻" → 新闻搜索  
3. "机器学习学术论文研究" → 学术搜索
4. "什么是区块链技术" → 通用搜索
```

### 2. 增强版代码执行工具 (code_execution)

#### 功能特性
- **多语言支持**: JavaScript、TypeScript、Python、SQL、Shell
- **安全沙箱**: 多层安全检查，防止危险操作
- **智能解析**: 自动识别代码块、内联代码、数学表达式
- **调试模式**: 支持调试输出和详细执行信息
- **性能监控**: 提供执行时间、内存使用等性能指标

#### 支持的编程语言
- `javascript`: JavaScript代码执行
- `typescript`: TypeScript代码执行  
- `python`: Python代码模拟执行
- `sql`: SQL查询模拟执行
- `shell`: 安全Shell命令执行

#### 安全限制
- 禁止文件系统操作
- 禁止网络请求
- 禁止系统进程操作
- 禁止DOM和存储操作
- 代码长度限制（10000字符）
- 执行时间限制（5秒）

#### 测试用例
```javascript
// 1. JavaScript计算
```javascript
function fibonacci(n) {
  if (n <= 1) return n;
  return fibonacci(n-1) + fibonacci(n-2);
}
console.log(fibonacci(10));
```

// 2. Python数据处理
```python
data = [1, 2, 3, 4, 5]
result = sum(data) / len(data)
print(f"平均值: {result}")
```

// 3. SQL查询
```sql
SELECT name, COUNT(*) as count 
FROM users 
WHERE age > 18 
GROUP BY name 
ORDER BY count DESC;
```

// 4. 数学表达式
计算 (15 + 25) * 2 / 5
```

## 🧠 智能工具选择

系统现在能够智能地根据用户请求选择最合适的工具：

### 代码执行触发条件
- 包含代码块 (```code```)
- 包含"运行"、"执行"、"计算"等关键词
- 包含编程语言名称
- 包含函数定义或代码结构
- 包含数学表达式

### 网络搜索触发条件  
- 包含"搜索"、"查找"、"什么是"等关键词
- 询问最新信息或新闻
- 需要技术文档或API参考
- 学术研究相关询问
- 比较或定义类问题

## 🎯 智能体模式测试

### 在开发环境中测试

1. **访问应用**: http://localhost:3000
2. **切换智能体模式**: 点击聊天界面的"智能体"模式
3. **测试代码执行**:
   ```
   用户: 帮我执行这段JavaScript代码：
   ```javascript
   const numbers = [1, 2, 3, 4, 5];
   const sum = numbers.reduce((a, b) => a + b, 0);
   console.log(`总和: ${sum}`);
   ```

4. **测试网络搜索**:
   ```
   用户: 搜索React 18的最新技术特性
   ```

5. **测试组合使用**:
   ```
   用户: 帮我搜索JavaScript数组方法，然后执行一些示例代码
   ```

## 📈 工具系统架构

### 工具选择流程
```
用户输入 → 内容分析 → 工具匹配 → 参数生成 → 工具执行 → 结果展示
```

### 核心组件
- `selectToolsForTask()`: 智能工具选择
- `generateToolInput()`: 智能参数生成  
- `REAL_TOOLS`: 真实工具实现
- `BaseAgent.executeActionStream()`: 流式工具执行

### 安全机制
- 多层输入验证
- 沙箱执行环境
- 资源使用限制
- 危险操作检测

## 🔮 下一步规划

1. **工具扩展**: 添加更多专业工具（图片处理、数据可视化等）
2. **API集成**: 集成真实的搜索API（DuckDuckGo、Bing等）
3. **代码执行**: 集成真实的Python/Node.js执行环境
4. **协作增强**: 多智能体协作使用工具
5. **用户定制**: 允许用户添加自定义工具

## 💡 使用建议

1. **明确指令**: 使用明确的动词如"搜索"、"执行"、"计算"
2. **提供上下文**: 在请求中包含足够的上下文信息
3. **代码格式**: 使用标准的代码块格式包围代码
4. **安全意识**: 避免在代码中包含敏感信息

---

现在您可以开始体验全新的智能体工具系统了！🚀
